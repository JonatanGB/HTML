<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="utf-8"/>
        <title>Form validation: Tarefa 1</title>
        <style>

            .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.4);
            }

            .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            }

            .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            }

            .close:hover,
            .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
            }

        </style>
    </head>

    <body>

        <button id="botao">Open Modal</button>

        <div id="mdl" class="modal">

        <div class="modal-content">
            <span class="close">&times;</span>
            <input type="text" name="input" id="input"><br>
            <button class="ok">ok</button><button class="cancelar">cancelar</button>
        </div>

        </div>

    <script>

    /*
        3) Crie uma função obtemUsuarioPeloNome(nome, cb) e verifica após 3 segundos se o nome faz parte do vetor:
        [
            {
                nome: "João",
                idade: 25,
                email: "joao@email.com"
            },
            {
                nome: "Pedro",
                idade: 33,
                email: "pedro@email.com"
            },
            {
                nome: "Marcos",
                idade: 16,
                email: "marcos@email.com"
            }
        ]
        
        Se o nome informado não estiver no vetor a função deverá chamar a callback passando um UserNotFoundError com a mensagem "Usuário não está cadastrado".
        Caso o nome informado esteja cadastrado na lista a callback deve ser chamada passando as informações do usuário com aquele nome.

        cb(error) -> Ocorreu um erro! [mensagem do erro]
        cb(success) -> Usuário encontrado: 
                       nome: [nome do usuário]
                       idade: [idade do usuário]
                       email: [email do usuário]
    */


            let vetor =         [
            {
                nome: "João",
                idade: 25,
                email: "joao@email.com"
            },
            {
                nome: "Pedro",
                idade: 33,
                email: "pedro@email.com"
            },
            {
                nome: "Marcos",
                idade: 16,
                email: "marcos@email.com"
            }
        ]

        function obtemUsuarioPeloNome(nome, cb){
            setTimeout(() => {
                let usuario = vetor.find(pessoa => pessoa.nome === nome)

                if(!usuario){
                    callback(new UserNotFoundError("Usuário não está cadastrado"))
                } else{
                    callback(null, usuario)
                }
            }, 3000)
        }

        function callback(erro, user){
            if (erro){
                console.log(`Ocorreu um erro! ${erro.message}`)
            } else{
                console.log(user.nome)
                console.log(user.idade)
                console.log(user.email)
            }
        }
        
        class UserNotFoundError extends Error{
            constructor(mensagem){
                super(mensagem)
                this.name = "UserNotFoundError"
            }
        }

        obtemUsuarioPeloNome("João", callback)

        




    </script>
  </body>
</html>